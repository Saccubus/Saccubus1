【ニコニコ】コメント付動画作成ツール さきゅばすスレの３４１氏のものを元に
NicoBrowser拡張1.4.4（作者：雪羽氏）の一部機能を借用して改造しました。

　・1.22r3e1a(2011/7/11)

　・1.22r3e1(2011/7/10) 　配布中止、アップローダ削除


修正（1.22r3eに対し）
　・NicoBrowser拡張1.4.4用のffmpegに対する不具合を修正
　・過去ログを結合中のデバッグ用メッセージの量を減らす


改変
　・過去ログの結合方式を変更し不要な項目も残すように変更
　　（若干、結果ファイルサイズが増えた）


おまけ
　・ダウンロードした動画の設定FFmpegによるデコード結果の表示の際
　　フォルダ指定の場合はダウンロードしていなくても捜して
　　デコードするように変更した。
　・ダウンロード・変換時の経過時間を表示
　・ダウンロード・変換時間と最終フレームの情報をデバッグログに出力


修正、改善、おまけは、さきゅばす上で青文字で表示しています。


さきゅばすの使い方などに関しては、公式サイト
saccubus.sourceforge.jp、同梱のさきゅばす1.22rの
readme.txt、1.22r3のreadme+.txtをご覧下さい。
1.22r3e1aの不具合報告等はさきゅばすスレでお願いします。


動作環境
　Windows XP/7　32bit（多分Vistaも動くはず）
　　　　　　　（64bitは環境が無い為テストしていません）。
　javaランタイム（JRE1.6 または JDK6）が必要です。
　　　　　　　　（JRE1.5 JDK5はテストしていません。）

注意
　・本Revは人柱用です。
　・1.22r3e1 full setは重大な不具合(投稿者コメントを合成できない)
　　があるため削除しました。ダウンロードした方は申し訳ありませんが、
　　nicovideo.dllとlibSDL_gfx-13.dllを、>>341同梱のものか
　　元々使っていたものに■戻す■ようにお願いします。


インストール方法
　既にさきゅばすを使用中の方
　・Saccubus.jarを差し替えるだけです。

　初めてさきゅばすを使う方
　・>>341(http://www.ne.jp/asahi/mochiyama/my/file/Saccubus-1.22r3.zip)
　　をダウンロードし展開します。
　　binフォルダ（FFmpeg,vhookライブラリnicovideo.dllなど）と
　　optionフォルダ　が必要です。
　　*** 同梱していません ***
　・1.22r3e1aを1.22r3を展開したフォルダにコピーします。
　　念の為に、元のSaccubus.jarはリネーム後保存しておいて下さい。
　　Saccubus.jarを 1.22r3e1a のものと差し替えてください。
　　1.22r3eテスト用のオプションファイルは、気が向けばoptionフォルダに
　　コピーしてください。なくても問題ないです。


起動
　　Saccubus.exe または Saccubus.jarをダブルクリックします。
　　メールアドレス、パスワードを入力します。
　　動画idを入力します。URLの後ろに?hogehogeがついてもOKです。
　　過去ログをダウンロードするには日付を
　　2001/7/7 7:7:7 や 2001/7/7 7:7 や 2001/7/7 のように入力します。
　　右上の変換ボタンをクリックするとダウンロードと変換が開始します。

●過去ログを複数ファイルに保存する
　・「保存設定」「動画・コメント」画面の
　　<保存するフォルダを指定し、ファイル名は自動で決定する>と
　　<コメントファイル名に時刻を付加する>チェックボックスを
　　チェックします。<取得コメント数>は1000に設定します。
　　1000以上にしても１回にダウンロード出来るのは1000までです。
　　最初は「保存設定」「コメント付き動画」画面の
　　<動画を変換する>にチェックをしません。

　・まず過去ログを日付を変えて複数回ダウンロードします。
　　<動画をダウンロードする>のは1回だけで十分です。

　・過去ログが集まったら、<動画を変換する>をチェックし、
　　変換ボタンをクリックすると、同一IDの全コメントを結合して
　　コメント付き動画に変換します。

　・同時表示コメント数を増やすには「変換設定」画面の
　　<表示コメント数>を、既定値の４０より大きくします。

　・動画をダウンロードした直後に「動画設定」画面の一番下の
　　<DL動画>ボタンをクリックして動画をチェックしておくと
　　FFmpegの設定ミスが減らせるかも？

●動作が変なときは
　・debug.batをダブルクリックして起動します。
　　本体が起動するので後は同じです。終了後
　　ログがフォルダ直下の log.txt に出力されるので
　　参考にして下さい。
　・デバッグのためコメント作業ファイルを消しておらず
　　そのまま残しています。コメントを調べたい方はどうぞ。
　　フォルダ直下の
　　　vhook.tmp　　　　一般コメント中間ファイル(Unicode-LE)
　　　vhookowner.tmp　投稿者コメント中間ファイル(Unicode-LE)
　　　tmp_comment.xml　過去ログ結合結果ファイル(UTF-8N)
　　動画に比べ小容量なので消さないのをご了解ください。


■変換確認
　・NicoBrowser拡張1.4.4用ffmpeg 2011/5/21版
　　(git-N-30117)、及び、>>341(SVN-21400)で行いました。
　　 Win7 32bit Core2Duo, WinXP 32bit CeleronD
　・但し再生確認はPC上だけで、携帯その他では未確認
　・>>670 は変換エラーする動画(Decoder not found)がありました。
　・>>481(SVN-23386)は livx264でのマルチスレッドオプションが
　　機能しないかもしれません。(コンパイル時pthreadなし)
　・NicoBrowser拡張1.4.4さきゅばす用に配布している
　　libavも動くかもしれません。


収録物
・まず最初に.txt
・LICENSE.txt　GPLライセンス
・gpl.ja.txt 　GPLライセンスの非公式日本語訳
・Saccubus.jar　　本体　1.22r3e1
・Saccubus.exe　　ランチャー（1.22rの物）
・auto.bat、debug.bat　　　 （1.22rの物）
・オプションファイル見本.xml（1.22rの物）
　（1.22rは公式サイトからダウンロードページに行けます。）
　http://sourceforge.jp/projects/saccubus/downloads/30757/Saccubus-1.22r.zip/
・readme1.22r3e1a.txt、readme.txt(1.22r)、readme+.txt(1.22r3)
・saccubus1.22r3e1a_src.zip
　　1.22r3e1 javaソースファイル、eclipseプロジェクトファイル
・1.22r3eテスト用オプションファイル
　-threads 4 指定
　x264のオプションはエンコードエラーにならないように設定
　xvidとx264は同一画質ではありません


変更履歴

1.22r3e1(2011/7/10) full set
　配布中止。nicovideo.dllに投稿者コメントを合成できない不具合があった

1.22r3e(2011/7/5)

修正(1.22r3を元にして)
　・過去ログのダウンロードのURL修正（1.4.4と同等レベル）
　　（過去ログのダウンロードはプレミアム会員のみ）
　・公式動画のコメントをダウンロード可能（1.4.4と同等レベル）
　・投稿者コメントをダウンロード・付加可能（1.4.4と同等レベル）
改善
　・コメントファイル名に[日時]を追加可能
　　複数のコメントファイルを動画に付加可能に。
　　（プレミアム会員で過去ログを使えば1000コメ以上付加可能）
　・投稿者コメントのスクリプト(ニワン語)を無視する
　　→投稿者のスクリプトが無駄に動画に付加されない。
おまけ
（簡単なFFmpeg機能チェックをさきゅばす本体で出来るようにした）
　・設定されたFFmpegのバージョンを表示
　・ダウンロードした動画の設定FFmpegによるデコード結果を表示
　　（動画サイズ、ビットレート、fps、動画codec、音声codecなど）
記述抜け追記（修正）
　・自動で調整する取得コメント数を最新のニコニコ動画仕様に変更
　　1分間100コメ、10分以上は1000コメまで（未確認）
　・動画タイトルの最後に付く空白を削除
